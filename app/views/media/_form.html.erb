<script type="text/javascript">
//<![CDATA[
tinyMCE.init({
editor_selector : 'mceEditor',
height : '270px',
mode : 'textareas',
noneditable_leave_contenteditable : 'true',
plugins : "contextmenu,paste,media,fullscreen,template,noneditable, table, spellchecker",
template_external_list_url : '/templates/templates.js',
content_css : '/stylesheets/customtinymce.css',
theme : 'advanced',
theme_advanced_blockformats : 'p,h1,h2,h3,h4,h5,h6',
theme_advanced_buttons1 : " fullscreen,separator,bold,italic,underline,strikethrough,separator,undo,redo,separator,link,unlink,template,formatselect, code",
theme_advanced_buttons2 : "cut,copy,paste,separator,pastetext,pasteword,separator,bullist,numlist,outdent,indent,separator,justifyleft,justifycenter,justifyright,justifiyfull,separator,removeformat,charmap",
theme_advanced_buttons3 : "EventButton,HimalayanButton,MapButton,OrgButton,PersonButton,PlaceButton, ProjectButton,RefButton,TibetanButton,TibTextButton, TopicButton ",
theme_advanced_buttons4 : "spellchecker,tablecontrols ",
spellchecker_languages : "+English=en",
spellchecker_rpc_url : '/application/spellchecker',
table_styles : "Header 1=header1;Header 2=header2;Header 3=header3",
table_cell_styles : "Header 1=header1;Header 2=header2;Header 3=header3;Table Cell=tableCel1",
table_row_styles : "Header 1=header1;Header 2=header2;Header 3=header3;Table Row=tableRow1",
theme_advanced_resizing : 'true',
theme_advanced_toolbar_align : 'left',
theme_advanced_toolbar_location : 'top',
width : '430px',
setup : function(ed) {
// Add Event button
  ed.addButton('EventButton', { title : 'Event Tag', image : '/images/Evt3.gif',
								onclick : function() {
									var title_name = prompt("Type in ID (optional)", "Type ID here");
									if (title_name != null){
										ed.focus();
										var current_selection = ed.selection.getContent();
										ed.selection.setContent('<span class="event" title="' + title_name + '">' + current_selection + '</span>');
									}	
								}
					});	//EventButton
// Add Map button
  ed.addButton('MapButton', { title : 'Map Tag', image : '/images/Map3.gif',
								onclick : function() {
									var title_name = prompt("Type in ID (optional)", "Type ID here");
									if (title_name != null){
										ed.focus();
										var current_selection = ed.selection.getContent();
										ed.selection.setContent('<span class="map" title="' + title_name + '">' + current_selection + '</span>');
									}
								}
					});	//MapButton
// Add Ref button
  ed.addButton('RefButton', { title : 'Ref Tag', image : '/images/Ref3.gif',
								onclick : function() {
									var title_name = prompt("Type in ID (optional)", "Type ID here");
									if (title_name != null){
										ed.focus();
										var current_selection = ed.selection.getContent();
										ed.selection.setContent('<span class="ref" title="' + title_name + '">' + current_selection + '</span>');
									}	
								}
					});	//RefButton
						
// Add Place button
  ed.addButton('PlaceButton', { title : 'Place Tag', image : '/images/Pla3.gif',
								onclick : function() {
									var title_name = prompt("Type in ID (optional)", "Type ID here");
									if (title_name != null){
										ed.focus();
										var current_selection = ed.selection.getContent();
										ed.selection.setContent('<span class="place" title="' + title_name + '">' + current_selection + '</span>');
									}	
								}
				}); //PlaceButton
// Add Person button				
  ed.addButton('PersonButton', { title : 'Person Tag', image : '/images/Per3.gif',
								onclick : function() {
									var title_name = prompt("Type in ID (optional)", "Type ID here");
									if (title_name != null){
										ed.focus();
										var current_selection = ed.selection.getContent();
										ed.selection.setContent('<span class="person" title="' + title_name + '">' + current_selection + '</span>');
									}
								}
				});	//PersonButton
// Add Org button
  ed.addButton('OrgButton', { title : 'Organization Tag', image : '/images/Org3.gif',
								onclick : function() {
									var title_name = prompt("Type in ID (optional)", "Type ID here");
									//if (title_name){
									if (title_name != null){
										ed.focus();
										var current_selection = ed.selection.getContent();
										ed.selection.setContent('<span class="org" title="' + title_name + '">' + current_selection + '</span>');
									}	
									//}
								}
				});	//OrgButton
// Add Project button				
  ed.addButton('ProjectButton', { title : 'Project Tag', image : '/images/Pro3.gif',
								onclick : function() {
									var title_name = prompt("Type in ID (optional)", "Type ID here");
									if (title_name != null){
										ed.focus();
										var current_selection = ed.selection.getContent();
										ed.selection.setContent('<span class="project" title="' + title_name + '">' + current_selection + '</span>');
									}	
								}
				});	//ProjectButton															
// Add Himalayan button				
  ed.addButton('HimalayanButton', { title : 'Himalayan Tag', image : '/images/Him3.gif',
								onclick : function() {
									var title_name = prompt("Type in ID (optional)", "Type ID here");
									if (title_name != null){
										ed.focus();
										var current_selection = ed.selection.getContent();
										ed.selection.setContent('<span class="himalayan" title="' + title_name + '">' + current_selection + '</span>');
									}	
								}
				});	//HimalayanButton							
// Add Tibetan button				
  ed.addButton('TibetanButton', { title : 'Tibetan Tag', image : '/images/Tib3.gif',
								onclick : function() {
									var title_name = prompt("Type in ID (optional)", "Type ID here");
									if (title_name != null){
										ed.focus();
										var current_selection = ed.selection.getContent();
										ed.selection.setContent('<span class="tibetan" title="' + title_name + '">' + current_selection + '</span>');
									}
								}
				});	//TibetanButton	
// Add Topic button				
  ed.addButton('TopicButton', { title : 'Topic Tag', image : '/images/Top3.gif',
								onclick : function() {
									var title_name = prompt("Type in ID (optional)", "Type ID here");
									if (title_name != null){
										ed.focus();
										var current_selection = ed.selection.getContent();
										ed.selection.setContent('<span class="topic" title="' + title_name + '">' + current_selection + '</span>');
									}	
								}
				});	//TopicButton				
// Add TibText button				
  ed.addButton('TibTextButton', { title : 'TibText Tag', image : '/images/Txt3.gif',
								onclick : function() {
									var title_name = prompt("Type in ID (optional)", "Type ID here");
									if (title_name != null){
										ed.focus();
										var current_selection = ed.selection.getContent();
										ed.selection.setContent('<span class="tibtext" title="' + title_name + '">' + current_selection + '</span>');
									}	
								}
				});	//TibTextButton	
																							
			} //function(ed)
});
//]]>
</script>

<% klass = @medium.class %>
<p>
  <b><%= klass.human_attribute_name('photographer').s %></b><br />
<%= f.collection_select(:photographer_id, @photographers, :id, :fullname, { :include_blank => true }, language_options) %> (<%= link_to ts('new.record', :what => Person.human_name), new_person_path, { :target => '_blank' } %>)
</p>
<p>
  <b><%= Medium.human_attribute_name('taken_on', :what => klass.human_name.titleize).s %></b><br/>
<%= datetime_select(:medium, :taken_on, :start_year => 1930, :include_blank => true, :include_seconds => true) %>
</p>
<p>
  <b><%= CaptureDeviceModel.human_name.titleize.s %></b><br />
<%= f.select(:capture_device_model_id, @capture_device_models.collect {|m| [ "#{h(m.capture_device_maker.title)} - #{h(m.title)}", m.id ] }, { :include_blank => true }) %> (<%= link_to ts('manage.record', :what => CaptureDeviceMaker.human_name), capture_device_makers_path, { :target => '_blank' } %>)
</p>
<p>
  <b><%= RecordingOrientation.human_name.titleize.s %></b><br />
<%= f.collection_select(:recording_orientation_id, @recording_orientations, :id, :title, { :include_blank => true }, language_options) %> (<%= link_to ts('new.record', :what => RecordingOrientation.human_name), new_recording_orientation_path, { :target => '_blank' } %>)
</p>
<p>
  <b><%= QualityType.human_name.titleize.s %></b><br />
<%= f.collection_select(:quality_type_id, @quality_types, :id, :title, { :include_blank => true }, language_options) %> (<%= link_to ts('new.record', :what => QualityType.human_name), new_quality_type_path, { :target => '_blank' } %>)
</p>
<p>
  <b><%= Medium.human_attribute_name('recording_note').s %></b><br />
<%= f.text_area :recording_note, :rows => 5, :class => 'mceEditor' %>
</p>
<p>
  <b><%= Medium.human_attribute_name('private_note').s %></b><br />
<%= f.text_area :private_note, :rows => 5, :class => 'mceEditor' %>
</p>